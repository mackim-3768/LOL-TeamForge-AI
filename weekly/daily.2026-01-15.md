# 주간 기능 계획 - 2026-01-15

## 1. 탐색 (아이디어)

### 1. AI 분석 시 태그 정보 주입 (AI Analysis Context Enhancement)
- **적용 대상**: AI 분석 모듈 (`ai_module.py`).
- **문제점**: 현재 AI 분석은 단순 KDA, 골드 등의 수치만 참고하여, 시스템이 계산한 '플레이 스타일 태그'의 정성적 맥락을 반영하지 못합니다.
- **중요한 이유**: AI가 "당신은 초반 교전 지향형입니다"라고 태그 기반으로 설명해주면 분석의 일관성과 깊이가 향상됩니다.

### 2. 플레이 스타일 태그 상세 설명 (Tag Explanation Tooltip)
- **적용 대상**: 소환사 상세 페이지 (`SummonerDetail.tsx`).
- **문제점**: 사용자에게 "초반 주도형" 태그가 붙었을 때, 구체적으로 어떤 지표(예: 15분 전 킬 관여율)가 높아서 붙었는지 알 수 없습니다.
- **중요한 이유**: 분석 결과에 대한 신뢰도를 높이고, 사용자가 자신의 플레이를 구체적인 수치로 이해할 수 있게 합니다.

### 3. 듀오 시너지 상세 분석 (Duo Synergy Breakdown)
- **적용 대상**: 듀오 시너지 도구 (`DuoSynergyTool.tsx`).
- **문제점**: 시너지 점수가 85점이라고 나와도, 구체적으로 왜 잘 맞는지(예: "정글의 갱킹력 + 탑의 호응력") 설명이 부족합니다.
- **중요한 이유**: 단순히 "좋다/나쁘다"를 넘어 "어떻게 플레이해야 하는지"에 대한 액션 아이템을 제공할 수 있습니다.

### 4. 챔피언 별 상세 지표 카드 (Champion Specific Metrics)
- **적용 대상**: 소환사 상세 페이지.
- **문제점**: 현재는 매치 리스트만 있고, 모스트 챔피언 3종에 대한 요약(평균 CS, 승률, KDA 등)을 한눈에 볼 수 없습니다.
- **중요한 이유**: LoL 분석 서비스의 기본 기능 중 하나로, 사용자가 자신의 주력 챔피언 성과를 빠르게 파악해야 합니다.

### 5. 티어 대비 성과 비교 (Performance vs Tier Avg)
- **적용 대상**: 역할군 점수 섹션.
- **문제점**: "점수 80점"이 절대적으로 좋은 것인지, 해당 티어 평균 대비 좋은 것인지 알기 어렵습니다.
- **중요한 이유**: 상대적인 위치를 알려줌으로써 사용자의 성취감이나 개선 욕구를 더 강하게 자극할 수 있습니다.

## 2. 선별 (Triage)

- **선정된 기능**: **플레이 스타일 태그 상세 설명 (Tag Explanation Tooltip)**
- **이유**:
  - **설명 가능성(Explainability)**: 현재 시스템의 가장 큰 차별점인 '태그 시스템'이 블랙박스로 남아있어, 이를 해소하는 것이 급선무입니다.
  - **사용자 경험(UX)**: 마우스 오버만으로 궁금증을 해결해주는 직관적인 UX 개선입니다.
  - **구현 용이성**: 백엔드에서 이미 계산하고 있는 `DimensionScores`를 전달하기만 하면 되므로, 적은 리소스로 큰 효과를 볼 수 있습니다.

- **선택되지 않은 다른 아이디어들**:
  - *AI 분석 강화*: AI 제공자(Mock)에 의존적이므로, 자체 로직인 태그 설명이 우선순위가 더 높습니다.
  - *챔피언 상세*: 중요하지만, 태그 시스템의 완성이 포트폴리오 차별화에 더 도움이 됩니다.
  - *듀오 시너지*: 아직 기본 분석 기능의 완성도를 높이는 단계이므로 후순위입니다.

## 3. 사양 초안 (Spec Draft)

### 기능명
플레이 스타일 태그 상세 설명 (Tag Explanation Tooltip)

### 문제 정의
사용자는 자신에게 부여된 '플레이 스타일 태그'의 선정 기준과 구체적인 수치를 알 수 없어, 분석 결과에 대한 신뢰를 갖기 어렵습니다.

### MVP 범위
- **Backend**: `PlaystyleTagItem` 스키마에 `description` 또는 `score_detail` 필드 추가.
  - 예: "Early Aggro: 0.82 (기준: 0.7)"
- **Frontend**: `SummonerDetail` 페이지의 태그 칩에 `Tooltip` 컴포넌트 적용.
  - 마우스 오버 시 상세 점수와 기준치를 표시.

### 선택적 범위 (Optional)
- 점수가 기준치를 얼마나 상회했는지 시각적(Bar graph)으로 표현.
- "상위 N%" 텍스트 추가 (전체 통계가 필요한 경우 제외).

### 인수 조건 (Acceptance Criteria)
1. 태그 칩에 마우스를 올리면 툴팁이 나타나야 한다.
2. 툴팁에는 해당 태그를 획득하게 된 주요 지표의 점수와 기준 점수가 표시되어야 한다. (예: "시야 점수 0.8 / 기준 0.7")
3. 백엔드 재계산 없이 기존 스냅샷 데이터 조회만으로 설명이 가능해야 한다(데이터 구조 변경).

## 4. 백로그 초안 (Backlog Draft)

### 제목
[Daily][2026-01-15] 플레이 스타일 태그 설명 기능 추가

### 작업
1. **[BE] TagDefinition 및 스냅샷 구조 개선**
   - 태그 계산 로직(`evaluate_tags_for_role`)에서 단순히 태그 ID만 반환하지 않고, 트리거된 점수(`value`)와 기준(`threshold`)을 포함하도록 변경.
   - DB의 JSON 컬럼에 이 상세 정보를 함께 저장하도록 수정.
2. **[BE] API 응답 스키마 변경**
   - `PlaystyleTagItem` Pydantic 모델에 `criteria` 필드(점수, 기준 등) 추가.
3. **[FE] 태그 Tooltip 구현**
   - MUI `Tooltip` 컴포넌트를 사용하여 태그 칩 감싸기.
   - API로 전달받은 상세 정보를 툴팁 내용으로 렌더링.

## 5. 문서 / 노트 (Docs / Notes)

### README 업데이트
- **Features** 섹션: "플레이 스타일 분석" 설명에 "상세 지표 확인 가능" 문구 추가.

### 다음 주기를 위한 질문
1. 태그 설명이 너무 길어질 경우 모바일 환경에서의 UX는 어떻게 처리할 것인가?
2. 기준 점수(`threshold`)가 버전 업데이트로 변경될 경우, 과거 스냅샷의 설명은 어떻게 유지할 것인가? (버전 관리 필요성 확인)
3. 툴팁 외에 별도의 '분석 상세 리포트' 모달이 필요한가?
