# Daily Feature Planning Log [2025-02-17]

## 1. Discovery (Ideas)

### 1. 플레이 스타일 태그 상세 설명 (Playstyle Tag Breakdown)
- **적용 단계**: 소환사 상세 페이지 > 플레이 스타일 태그 섹션
- **문제 해결**: 사용자는 자신이 왜 "초반 주도형"인지, "후반 캐리형"인지 구체적인 수치로 알고 싶어 합니다. 현재는 태그 이름만 표시되어 분석의 신뢰도가 떨어질 수 있습니다.
- **가치**: 분석 결과의 투명성과 설명력(Explainability)을 높여 사용자 신뢰를 강화합니다.

### 2. 매치 골드 그래프 시각화 (Match Gold Graph)
- **적용 단계**: 매치 상세 모달
- **문제 해결**: 단순 KDA와 아이템 만으로는 게임의 흐름(역전, 스노우볼링)을 파악하기 어렵습니다.
- **가치**: 시간대별 골드 차이를 그래프로 제공하여 승패의 결정적 순간을 시각적으로 통찰할 수 있게 합니다.

### 3. 듀오 시너지 분석 (Duo Synergy Calculator)
- **적용 단계**: 신규 페이지 또는 팀 빌더
- **문제 해결**: 친구와 함께 플레이할 때 어떤 조합이 승률이 좋은지 궁금해하는 니즈를 충족합니다.
- **가치**: 소셜 플레이를 장려하고, 단순 개인 분석을 넘어선 관계 기반 데이터를 제공합니다.

### 4. 역할군별 점수 변동 추이 (Role Score Trend)
- **적용 단계**: 소환사 상세 페이지 > Role Performance
- **문제 해결**: 현재 점수는 최근 게임의 평균이지만, 실력이 상승세인지 하락세인지 파악하기 어렵습니다.
- **가치**: 성장 과정을 시각화하여 사용자의 리텐션을 높이고 성취감을 부여합니다.

### 5. AI 분석 페르소나 설정 (AI Persona Setting)
- **적용 단계**: AI 분석 요청 시 옵션 선택
- **문제 해결**: 항상 같은 어조의 분석은 지루할 수 있습니다.
- **가치**: '엄격한 코치', '데이터 분석가', '열정적인 팬' 등 다양한 페르소나를 제공하여 재미 요소와 몰입감을 증대합니다.

---

## 2. Triage

### Selected Feature: 플레이 스타일 태그 상세 설명 (Playstyle Tag Breakdown)
- **선정 이유**:
  - **Explainability**: 이 프로젝트의 핵심 목표 중 하나인 "분석의 설명력"을 가장 직접적으로 개선합니다.
  - **Feasibility**: 백엔드에서 이미 태그 산출을 위한 세부 점수(Aggro, Vision, Farm 등)를 계산하고 있으므로, 이를 저장하고 프론트엔드에 노출하는 비용이 매우 낮습니다.
  - **Impact**: 사용자가 분석 결과를 단순히 수동적으로 받아들이는 것이 아니라, 자신의 플레이 스타일을 구성하는 요소를 이해하고 납득하게 만듭니다.

### Why others were not selected:
- **매치 골드 그래프**: Riot API의 Match Timeline 데이터 수집 로직 추가가 필요하여 데이터 수집 파이프라인 변경 공수가 있습니다.
- **듀오 시너지**: 신규 페이지 및 검색 로직 개발이 필요하여 단일 기능으로는 규모가 큽니다.
- **점수 변동 추이**: UI 공간 확보 및 시계열 데이터 처리가 필요하며, 태그 설명보다 우선순위가 낮습니다.
- **AI 페르소나**: 흥미롭지만 분석의 질적 향상보다는 부가적인 재미 요소에 가깝습니다.

---

## 3. Spec Draft (Top 1)

### Feature Name
플레이 스타일 태그 상세 설명 (Playstyle Tag Explainer)

### Problem Statement
사용자는 "초반 주도형" 같은 태그를 받았을 때, 구체적으로 어떤 지표(초반 킬 관여율, 라인전 골드 차이 등)가 높아서 이 태그가 부여되었는지 알 수 없다.

### MVP Scope
- **Backend**:
  - 태그 결정 로직(`evaluate_tags_for_role`)에서 해당 태그의 선정 기준이 된 상위 3개 `weights` 항목과 그 점수를 함께 반환.
  - `SummonerPlaystyleTag` 모델의 JSON 구조에 근거 데이터(`contributing_scores`) 저장.
- **Frontend**:
  - 태그 칩(Chip)에 마우스 오버 시(Hover), 툴팁(Tooltip) 표시.
  - 툴팁 내용: 태그 설명(선택사항) 및 기여도가 높은 상위 3개 지표 이름과 점수(0~100점 환산).

### Optional Scope
- 태그별 상세 설명 텍스트 (예: "초반 10분간의 킬 관여율이 상위 10%입니다.")
- 레이더 차트로 태그 성향 시각화.

### Acceptance Criteria
1. 태그 데이터 응답에 `contributing_scores` 리스트(지표명, 점수)가 포함되어야 한다.
2. 프론트엔드에서 태그에 마우스를 올리면 툴팁이 즉시 나타나야 한다.
3. 툴팁에는 최소 1개 이상의 근거 지표가 한글 명칭과 함께 표시되어야 한다.
4. 데이터가 없는 과거 생성 태그의 경우 툴팁이 뜨지 않거나 "상세 정보 없음"으로 처리되어야 한다.

---

## 4. Backlog Draft

### Title
[Daily][2025-02-17] 플레이 스타일 태그 근거 데이터 저장 및 툴팁 표시

### Tasks
1. **[BE] 태그 산출 로직 개선**
   - `backend/core_api/playstyle_tags.py` 내 `evaluate_tags_for_role` 수정.
   - 태그 선정 시 `weights`와 `DimensionScores`를 곱하여 기여도가 높은 상위 3개 항목 추출.
2. **[BE] 데이터 모델 검증**
   - `SummonerPlaystyleTag` 테이블의 `tags` 컬럼(JSON)에 추가 필드가 잘 저장되는지 확인.
3. **[FE] 타입 정의 업데이트**
   - `api.ts` 내 `PlaystyleTag` 인터페이스에 `contributing_scores` 필드 추가.
4. **[FE] 툴팁 UI 구현**
   - `SummonerDetail.tsx`에서 MUI `Tooltip` 컴포넌트 적용.
   - 지표 영문명(`earlyAggro`)을 한글명(`초반 교전`)으로 매핑하는 유틸리티 추가.

---

## 5. Docs / Notes

### README Update Suggestions
- **Features** 섹션에 "Transparent Playstyle Analysis" 항목을 추가하여, 단순 태그 부여가 아니라 근거를 제시한다는 점을 강조.

### Questions for Next Cycle
1. **모바일 사용성**: 툴팁은 모바일에서 터치로 동작해야 하는데, 기존 클릭 이벤트와 충돌하지 않는가?
2. **지표 한글화**: `earlyAggro`, `lateCarry` 등의 내부 변수명을 사용자 친화적인 한글 용어로 어떻게 통일할 것인가? (별도 매핑 테이블 필요)
3. **과거 데이터 호환성**: 이미 저장된 태그 데이터에는 근거 점수가 없는데, 이를 위해 재계산(Recalculate) 버튼을 유도할 것인가?
